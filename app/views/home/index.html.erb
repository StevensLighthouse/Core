<div id="map-canvas"></div>

<% content_for :scripts do %>
    <script type="text/javascript">
        var map,
            raw = {
                tours: <%= @tours.to_json %>,
                stops: <%= @stops.to_json %>
            },
            model;

        function initialize() {
            var mapOptions = {
                zoom: 14,
                center: new google.maps.LatLng(40.7435753309731, -74.02875912059483),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
            model = new AppContainer(raw, map);

            ko.applyBindings(model);
            model.init();
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
<% end %>
